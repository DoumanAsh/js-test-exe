!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";function i(e,t){return e.innerHTML=t,e}function r(e){return e.innerHTML}t.b=i,t.a=r},function(e,t,n){"use strict";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=document.createElement("ul");return t.classList.add("tree__sub"),null!==e&&e.appendChild(t),t}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=document.createElement("li");return t.classList.add("tree__element"),null!==e&&e.appendChild(t),t}function c(e){var t=e.parentNode;return t.removeChild(e),t}function o(e){var t=document.createElement("input");return t.type="text",t.value=e.innerHTML,e.innerHTML="",e.appendChild(t),t}function l(e){var t=e.value,n=e.parentNode;return n.removeChild(e),n.innerHTML=t,n}function u(e){e.setSelectionRange(0,e.value.length),e.focus()}t.f=i,t.e=r,t.a=c,t.b=o,t.d=l,t.c=u},function(e,t,n){"use strict";function i(){localStorage.setItem(u,n.i(c.a)(l.tree))}function r(){var e=localStorage.getItem(u);null!==e&&n.i(c.b)(l.tree,e)}Object.defineProperty(t,"__esModule",{value:!0});var c=n(0),o=n(1),l={tree:document.getElementById("object-tree"),tree_menu:document.getElementById("object-tree-menu"),context_menu:document.getElementById("context-menu"),selection:null,remove_selection:function(){var e=n.i(o.a)(this.selection);0===e.children.length&&n.i(o.a)(e),this.hide_menu()},hide_menu:function(){this.selection=null,this.context_menu.classList.add("hidden")},editable:null,start_edit:function(){var e=this;return this.editable=n.i(o.b)(this.selection),n.i(o.c)(this.editable),this.editable.addEventListener("keyup",function(t){13===t.keyCode&&(t.stopPropagation(),t.preventDefault(),e.stop_edit())}),this.hide_menu(),this.editable},stop_edit:function(){var e=n.i(o.d)(this.editable);return this.editable=null,e}};l.tree_actions={add_element:l.context_menu.children[0],add_child:l.context_menu.children[1],edit:l.context_menu.children[2],delete:l.context_menu.children[3],save:l.tree_menu.children[0],load:l.tree_menu.children[1]},l.tree_actions.add_element.addEventListener("click",function(){var e=l.selection.parentNode;l.selection=n.i(o.e)(e),l.start_edit()}),l.tree_actions.add_child.addEventListener("click",function(){var e=n.i(o.f)(l.selection);l.selection=n.i(o.e)(e),l.start_edit()}),l.tree_actions.edit.addEventListener("click",function(){l.start_edit()}),l.tree_actions.delete.addEventListener("click",function(){l.remove_selection()}),l.tree.addEventListener("click",function(){null!==l.selection&&l.hide_menu(),null!==l.editable&&l.stop_edit()}),l.tree.addEventListener("contextmenu",function(e){e.preventDefault(),e.stopPropagation(),l.selection=e.target,l.context_menu.style.left=e.clientX+"px",l.context_menu.style.top=e.clientY+"px",l.context_menu.classList.remove("hidden")});var u="current_state";l.tree_actions.save.addEventListener("click",i),l.tree_actions.load.addEventListener("click",r),window.onbeforeunload=i,r()}]);
//# sourceMappingURL=app.js.map